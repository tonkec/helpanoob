<div class="bg-wrap">
    <div class="bg-img slide-active"></div>
    <div class="bg-img"></div>
    <div class="bg-img"></div>
    <div class="bg-img"></div>
</div>

<%= render partial: "layouts/landing_navigation" %>


<section class="devise-section">
  <div class="row devise-row">

    <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-3 col-lg-6 col-lg-offset-3 col-xl-4 col-xl-offset-4 p-0">
      <h1 class="white-text signup-heading">Sign Up!</h1>

      <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
      <%= devise_error_messages! %>

      <%= f.text_field :username,
        autofocus: true,
        placeholder: "Username",
        class: "orange-input-new",
        data: {
          endpoint: signup_check_username_uniqueness_url
        } %>

      <%= f.email_field :email,
        autofocus: true,
        placeholder: "Email",
        class: "orange-input-new",
        data: {
          endpoint: signup_check_email_uniqueness_url
        } %>

      <%= f.password_field :password, autocomplete: "off", placeholder: "Password", class: "orange-input-new" %>

      <%= f.password_field :password_confirmation, autocomplete: "off", placeholder: "Confirm password",  class: "orange-input-new" %>

      <div class="input-group">
        <span class="input-group-btn">
          <span class="btn btn-orange btn-file">
            Browse&hellip;<%= f.file_field :avatar, class: "input-file btn-primary", type: "file", accept: 'image/jpeg,image/gif,image/png' %>
          </span>
        </span>
        <input type="text" class="form-control" placeholder="Choose your avatar" readonly>
      </div>

        <%= f.submit "Let's do it!", class: "btn-signup" %>

        <%= render "devise/shared/links" %>

      <% end %>


    </div>

  </div><!-- row-slideshow -->

</section>


<script>


  $(document).on('change', '.btn-file :file', function() {
    var input = $(this),
    numFiles = input.get(0).files ? input.get(0).files.length : 1,
    label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
    input.trigger('fileselect', [numFiles, label]);
  });

  $(document).ready( function() {
    $('.btn-file :file').on('fileselect', function(event, numFiles, label) {

      var input = $(this).parents('.input-group').find(':text'),
      log = numFiles > 1 ? numFiles + ' files selected' : label;

      if( input.length ) {
        input.val(log);
      } else {
        if( log ) alert(log);
      }

    });
  });

  var imgs = $(".bg-img");
  i = -1;
  (function f(){
    i = (i + 1) % imgs.length;

    $(imgs).not(imgs[i]).removeClass("slide-active");
    $(imgs[ i ]).addClass("slide-active");
    setTimeout(f, 7000);
  })();

</script>